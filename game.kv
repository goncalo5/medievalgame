#:import RESOURCES settings.RESOURCES
#:import settings settings

<DarkLabel>:
    font_size: 25
    color: 0, 0, 0, 1

<MenuLabel@DarkLabel>:
    width: app.width * 0.25
    size_hint: None, None

<ContentLabel@DarkLabel>:
    width: app.width * 0.125
    size_hint: None, None

<HeaderLabel@DarkLabel>:
    font_size: 30

<ImageButton@ButtonBehavior+Image>:
    size: 100, 100
    size_hint: None, None

<HeaderBoxLayout@BoxLayout>:
    canvas:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    orientation: "horizontal"
    size_hint_y: None
    height: app.height * 0.1
    Button:
        text: "village"
        on_press:
            app.game.current = "overview"
    Image:
        source: app.wood.icon
    DarkLabel:
        text: "%s" % int(app.wood.current)
    Image:
        source: app.clay.icon
    DarkLabel:
        text: "%s" % int(app.clay.current)
    Image:
        source: app.iron.icon
    DarkLabel:
        text: "%s" % int(app.iron.current)
    Image:
        source: RESOURCES.get("ICON").get("BOOTY")
    DarkLabel:
        text: "%s" % int(app.warehouse.max_capacity)
    Image:
        source: RESOURCES.get("ICON").get("POPULATION")
    DarkLabel:
        text: "%s/%s" % (int(app.population["total"]), int(app.population["max"]))


<BarracksScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        BarracksDescriptionMenu
        TabbedPanel:
            do_default_tab: False
            tab_width: self.width / 2
            TabbedPanelItem:
                text: "Recruitment"
                AllUnitsRecruit:

            TabbedPanelItem:
                text: "Decommissioning"
<Overview@Screen>:
    canvas.before:
        Color:
            rgba: 0,.3,0,1
        Rectangle:
            pos: self.pos
            size: self.size
    HeaderBoxLayout:
        pos_hint: {"top": 1}
    ImageButton:
        source: "img/Buildings/Main1.png"
        pos_hint: {"center_x": .7, "center_y": .7}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Place1.png"
        pos_hint: {"center_x": .65, "center_y": .45}
        on_press: root.manager.current = "rally_point_screen"
    ImageButton:
        source: "img/Buildings/Statue1.png"
        pos_hint: {"center_x": .5, "center_y": .35}
        on_press: root.manager.current = "statue_screen"
    ImageButton:
        source: "img/Buildings/Wood1.png"
        pos_hint: {"center_x": .9, "center_y": .1}
        on_press: root.manager.current = "timber_camp_screen"
    ImageButton:
        source: "img/Buildings/Stone1.png"
        pos_hint: {"center_x": .1, "center_y": .8}
        on_press: root.manager.current = "clay_pit_screen"
    ImageButton:
        source: "img/Buildings/Iron1.png"
        pos_hint: {"center_x": .1, "center_y": .1}
        on_press: root.manager.current = "iron_mine_screen"
    ImageButton:
        source: "img/Buildings/Farm1.png"
        pos_hint: {"center_x": .9, "center_y": .8}
        on_press: root.manager.current = "farm_screen"
    ImageButton:
        source: "img/Buildings/Storage1.png"
        pos_hint: {"center_x": .25, "center_y": .55}
        on_press: root.manager.current = "warehouse_screen"
    ImageButton:
        source: "img/Buildings/Hide1.png"
        pos_hint: {"center_x": .5, "center_y": .8}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Barracks1.png"
        pos_hint: {"center_x": .8, "center_y": .4}
        on_press: root.manager.current = "barracks_screen"
    ImageButton:
        source: "img/Buildings/Stable1.png"
        pos_hint: {"center_x": .25, "center_y": .35}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Garage1.png"
        pos_hint: {"center_x": .6, "center_y": .25}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Snob1.png"
        pos_hint: {"center_x": .3, "center_y": .75}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Smith1.png"
        pos_hint: {"center_x": .4, "center_y": .25}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Market1.png"
        pos_hint: {"center_x": .4, "center_y": .65}
        on_press: root.manager.current = "main"
    ImageButton:
        source: "img/Buildings/Wall1.png"
        pos_hint: {"center_x": .75, "center_y": .25}
        on_press: root.manager.current = "main"
        
        
<Main@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        HeadquartersDescriptionMenu
        AllBuildingsUpgrade:

<TimberCampScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        TimberCampDescriptionMenu
        TimberCampMenu
<ClayPitScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        ClayPitDescriptionMenu
        ClayPitMenu
<IronMineScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        IronMineDescriptionMenu
        IronMineMenu
<FarmScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        FarmDescriptionMenu
        BoxLayout:
            orientation: "horizontal"
            Image:
                source: app.farm.image
            BoxLayout:
                orientation: "vertical"
                DarkLabel:
                    text: "Maximum population"
                BoxLayout:
                    orientation: "horizontal"
                    Image:
                        source: app.population_icon
                        size_hint_x: 0.1
                    DarkLabel:
                        text: "Maximum population"
                        size_hint_x: 0.7
                    DarkLabel:
                        text: "%s" % app.population["max"]
                        size_hint_x: 0.2
                BoxLayout:
                    orientation: "horizontal"
                    Image:
                        source: app.population_icon
                        size_hint_x: 0.1
                    DarkLabel:
                        text: "Maximum population at level %s" % int(app.farm.level + 1)
                        size_hint_x: 0.7
                    DarkLabel:
                        text: "%s" % int(app.population["max"] * app.farm.population_ratio)
                        size_hint_x: 0.2
                DarkLabel:
                    text: "Current population"
                BoxLayout:
                    orientation: "horizontal"
                    DarkLabel:
                        text: "Buildings (includes the building queue)"
                        size_hint_x: 0.8
                    DarkLabel:
                        text: "%s" % int(app.population["buildings"])
                        size_hint_x: 0.2
                BoxLayout:
                    orientation: "horizontal"
                    DarkLabel:
                        text: "Troops"
                        size_hint_x: 0.8
                    DarkLabel:
                        text: "%s" % app.population["units"]
                        size_hint_x: 0.2
                BoxLayout:
                    orientation: "horizontal"
                    DarkLabel:
                        text: "Troops in production"
                        size_hint_x: 0.8
                    DarkLabel:
                        text: "%s" % 0
                        size_hint_x: 0.2
                BoxLayout:
                    orientation: "horizontal"
                    DarkLabel:
                        text: "All"
                        size_hint_x: 0.8
                    DarkLabel:
                        text: "%s" % int(app.population["total"])
                        size_hint_x: 0.2
                BoxLayout:
                    orientation: "horizontal"
                    Image:
                        source: app.militia.icon
                        size_hint_x: 0.2
                    DarkLabel:
                        text: "Militia in village"
                        size_hint_x: 0.8
                Button:
                    text: "Establish militia"

<WarehouseScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        WarehouseDescriptionMenu
        BoxLayout:
            orientation: "vertical"
            BoxLayout:
                orientation: "horizontal"
                DarkLabel:
                    text: "Storage capacity"
                DarkLabel:
                    text: "Units per resource"
            BoxLayout:
                orientation: "horizontal"
                DarkLabel:
                    text: "Current storage capacity"
                DarkLabel:
                    text: "%s" % int(app.warehouse.max_capacity)
            BoxLayout:
                orientation: "horizontal"
                DarkLabel:
                    text: "Storage capacity on level %s" % app.warehouse.level
                DarkLabel:
                    text: "%s" % int(app.warehouse.calc_capacity(app.warehouse.level + 1))
            Label:
            BoxLayout:
                orientation: "horizontal"
                DarkLabel:
                    text: "Warehouse full"
                DarkLabel:
                    text: "Time (hh:mm:ss)"
            BoxLayout:
                orientation: "horizontal"
                Image:
                    source: app.wood.icon
                DarkLabel:
                    text: "%s" % app.warehouse.time_when_its_full["wood"]
                DarkLabel:
                    text: "%s" % app.warehouse.time_to_full["wood"]
            BoxLayout:
                orientation: "horizontal"
                Image:
                    source: app.clay.icon
                DarkLabel:
                    text: "%s" % app.warehouse.time_when_its_full["clay"]
                DarkLabel:
                    text: "%s" % app.warehouse.time_to_full["clay"]
            BoxLayout:
                orientation: "horizontal"
                Image:
                    source: app.iron.icon
                DarkLabel:
                    text: "%s" % app.warehouse.time_when_its_full["iron"]
                DarkLabel:
                    text: "%s" % app.warehouse.time_to_full["iron"]
            
                

<RallyPointScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        RallyPointDescriptionMenu:
            size_hint_y: 0.15
        TabbedPanel:
            do_default_tab: False
            tab_width: self.width / 5
            size_hint_y: 0.85

            TabbedPanelItem:
                text: "Commands"
            TabbedPanelItem:
                text: "Troops"
            TabbedPanelItem:
                text: "Scavenging"
                ScavengingPanel
                            
            TabbedPanelItem:
                text: "Simulator"
            TabbedPanelItem:
                text: "Troop templates"
                font_size: 22
<StatueScreen@Screen>:
    canvas.before:
        Color:
            rgba: 1, 242/255, 179/255, 1
        Rectangle:
            pos: self.pos
            size: self.size
    BoxLayout:
        orientation: "vertical"
        HeaderBoxLayout
        StatueDescriptionMenu
        TabbedPanel:
            do_default_tab: False
            tab_width: self.width / 5
            TabbedPanelItem:
                text: "Resident"
                BoxLayout:
                    orientation: "vertical"
                    Label:
                        text: str(app.paladin.level)
                        size_hint_y: 0.05
                    BoxLayout:
                        orientation: "horizontal"
                        size_hint_y: 0.95
                        BoxLayout:
                            orientation: "vertical"
                            Label:
                                text: "Offense"
                                canvas.before:
                                    Color:
                                        rgba: .5, 0, 0, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                            Image:
                                source: "img/knight/skills/offense1.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/offense2.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/offense3.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/offense4.png"
                            Label:
                                text: "%s/4" % 0
                        BoxLayout:
                            orientation: "vertical"
                            Label:
                                text: "Village"
                                canvas.before:
                                    Color:
                                        rgba: 0, 0.5, 0, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                            Image:
                                source: "img/knight/skills/village1.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/village2.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/village3.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/village4.png"
                            Label:
                                text: "%s/4" % 0
                        BoxLayout:
                            orientation: "vertical"
                            Label:
                                text: "defense"
                                canvas.before:
                                    Color:
                                        rgba: 0, 0, .5, 1
                                    Rectangle:
                                        pos: self.pos
                                        size: self.size
                            Image:
                                source: "img/knight/skills/defense1.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/defense2.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/defense3.png"
                            Label:
                                text: "%s/4" % 0
                            Image:
                                source: "img/knight/skills/defense4.png"
                            Label:
                                text: "%s/4" % 0

            TabbedPanelItem:
                text: "Overview"


<Game>:
    id: screen_manager
    overview: overview
    main: main
    barracks_screen: barracks_screen
    timber_camp_screen: timber_camp_screen
    clay_pit_screen: clay_pit_screen
    iron_mine_screen: iron_mine_screen
    farm_screen: farm_screen
    warehouse_screen: warehouse_screen
    rally_point_screen: rally_point_screen
    Overview:
        id: overview
        name: "overview"
        manager: screen_manager
    Main:
        id: main
        name: "main"
        manager: screen_manager
    RallyPointScreen:
        id: rally_point_screen
        name: "rally_point_screen"
        manager: screen_manager
    StatueScreen:
        id: statue_screen
        name: "statue_screen"
        manager: screen_manager
    TimberCampScreen:
        id: timber_camp_screen
        name: "timber_camp_screen"
        manager: screen_manager
    ClayPitScreen:
        id: clay_pit_screen
        name: "clay_pit_screen"
        manager: screen_manager
    IronMineScreen:
        id: iron_mine_screen
        name: "iron_mine_screen"
        manager: screen_manager
    FarmScreen:
        id: farm_screen
        name: "farm_screen"
        manager: screen_manager
    WarehouseScreen:
        id: warehouse_screen
        name: "warehouse_screen"
        manager: screen_manager
    BarracksScreen:
        id: barracks_screen
        name: "barracks_screen"
        manager: screen_manager